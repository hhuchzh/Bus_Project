(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08d084b6"],{"586c":function(t,e,i){"use strict";i.r(e);i("b0c0");var s=i("7a23"),n={class:"router-history"};function r(t,e,i,r,o,a){var c=Object(s["W"])("el-tab-pane"),u=Object(s["W"])("el-tabs");return Object(s["N"])(),Object(s["n"])("div",n,[Object(s["s"])(u,{modelValue:o.activeValue,"onUpdate:modelValue":e[0]||(e[0]=function(t){return o.activeValue=t}),closable:!(1===o.historys.length&&t.$route.name===a.defaultRouter),type:"card",onContextmenu:e[1]||(e[1]=Object(s["ob"])((function(t){return a.openContextMenu(t)}),["prevent"])),onTabClick:a.changeTab,onTabRemove:a.removeTab},{default:Object(s["lb"])((function(){return[(Object(s["N"])(!0),Object(s["n"])(s["b"],null,Object(s["U"])(o.historys,(function(e){return Object(s["N"])(),Object(s["l"])(c,{key:a.name(e),label:e.meta.title,name:a.name(e),tab:e,class:"gva-tab"},{label:Object(s["lb"])((function(){return[Object(s["o"])("span",{style:Object(s["E"])({color:o.activeValue===a.name(e)?t.activeColor:"#333"})},[Object(s["o"])("i",{class:"dot",style:Object(s["E"])({backgroundColor:o.activeValue===a.name(e)?t.activeColor:"#ddd"})},null,4),Object(s["r"])(" "+Object(s["ab"])(e.meta.title),1)],4)]})),_:2},1032,["label","name","tab"])})),128))]})),_:1},8,["modelValue","closable","onTabClick","onTabRemove"]),Object(s["mb"])(Object(s["o"])("ul",{style:Object(s["E"])({left:o.left+"px",top:o.top+"px"}),class:"contextmenu"},[Object(s["o"])("li",{onClick:e[2]||(e[2]=function(){return a.closeAll&&a.closeAll.apply(a,arguments)})},"关闭所有"),Object(s["o"])("li",{onClick:e[3]||(e[3]=function(){return a.closeLeft&&a.closeLeft.apply(a,arguments)})},"关闭左侧"),Object(s["o"])("li",{onClick:e[4]||(e[4]=function(){return a.closeRight&&a.closeRight.apply(a,arguments)})},"关闭右侧"),Object(s["o"])("li",{onClick:e[5]||(e[5]=function(){return a.closeOther&&a.closeOther.apply(a,arguments)})},"关闭其他")],4),[[s["ib"],o.contextMenuVisible]])])}var o=i("5530"),a=(i("4de4"),i("ac1f"),i("1276"),i("c740"),i("a434"),i("45fc"),i("5502")),c=i("d8ad"),u=function(t){return t.name+JSON.stringify(t.query)+JSON.stringify(t.params)},l={name:"HistoryComponent",data:function(){return{historys:[],activeValue:"",contextMenuVisible:!1,left:0,top:0,isCollapse:!1,isMobile:!1,rightActive:""}},computed:Object(o["a"])(Object(o["a"])({},Object(a["c"])("user",["userInfo","activeColor"])),{},{defaultRouter:function(){return this.userInfo.authority.defaultRouter}}),watch:{contextMenuVisible:function(){var t=this;this.contextMenuVisible?document.body.addEventListener("click",(function(){t.contextMenuVisible=!1})):document.body.removeEventListener("click",(function(){t.contextMenuVisible=!1}))},$route:function(t,e){this.historys=this.historys.filter((function(t){return!t.meta.closeTab})),this.setTab(t),sessionStorage.setItem("historys",JSON.stringify(this.historys)),this.activeValue=window.sessionStorage.getItem("activeValue"),e&&t&&e.name===t.name&&c["emitter"].emit("reload")}},created:function(){var t=this;c["emitter"].on("mobile",(function(e){t.isMobile=e})),c["emitter"].on("collapse",(function(e){t.isCollapse=e}));var e=[{name:this.defaultRouter,meta:{title:"首页"},query:{},params:{}}];this.historys=JSON.parse(sessionStorage.getItem("historys"))||e,window.sessionStorage.getItem("activeValue")?this.activeValue=window.sessionStorage.getItem("activeValue"):this.activeValue=u(this.$route),this.setTab(this.$route)},beforeDestroy:function(){c["emitter"].off("collapse"),c["emitter"].off("mobile")},methods:{name:function(t){return t.name+JSON.stringify(t.query)+JSON.stringify(t.params)},openContextMenu:function(t){if(1===this.historys.length&&this.$route.name===this.defaultRouter)return!1;var e,i="";(i="SPAN"===t.srcElement.nodeName?t.srcElement.offsetParent.id:t.srcElement.id,i)&&(this.contextMenuVisible=!0,e=this.isCollapse?54:220,this.isMobile&&(e=0),this.left=t.clientX-e,this.top=t.clientY+10,this.rightActive=i.split("-")[1])},closeAll:function(){this.historys=[{name:this.defaultRouter,meta:{title:"首页"},query:{},params:{}}],this.$router.push({name:this.defaultRouter}),this.contextMenuVisible=!1,sessionStorage.setItem("historys",JSON.stringify(this.historys))},closeLeft:function(){var t,e=this,i=this.historys.findIndex((function(i){return u(i)===e.rightActive&&(t=i),u(i)===e.rightActive})),s=this.historys.findIndex((function(t){return u(t)===e.activeValue}));this.historys.splice(0,i),i>s&&this.$router.push(t),sessionStorage.setItem("historys",JSON.stringify(this.historys))},closeRight:function(){var t,e=this,i=this.historys.findIndex((function(i){return u(i)===e.rightActive&&(t=i),u(i)===e.rightActive})),s=this.historys.findIndex((function(t){return u(t)===e.activeValue}));this.historys.splice(i+1,this.historys.length),i<s&&this.$router.push(t),sessionStorage.setItem("historys",JSON.stringify(this.historys))},closeOther:function(){var t,e=this;this.historys=this.historys.filter((function(i){return u(i)===e.rightActive&&(t=i),u(i)===e.rightActive})),this.$router.push(t),sessionStorage.setItem("historys",JSON.stringify(this.historys))},isSame:function(t,e){if(t.name!==e.name)return!1;for(var i in t.query)if(t.query[i]!==e.query[i])return!1;for(var s in t.params)if(t.params[s]!==e.params[s])return!1;return!0},setTab:function(t){var e=this;if(!this.historys.some((function(i){return e.isSame(i,t)}))){var i={};i.name=t.name,i.meta=t.meta,i.query=t.query,i.params=t.params,this.historys.push(i)}window.sessionStorage.setItem("activeValue",u(this.$route))},changeTab:function(t){var e=t.instance.attrs.tab;this.$router.push({name:e.name,query:e.query,params:e.params})},removeTab:function(t){var e=this.historys.findIndex((function(e){return u(e)===t}));u(this.$route)===t&&(1===this.historys.length?this.$router.push({name:this.defaultRouter}):e<this.historys.length-1?this.$router.push({name:this.historys[e+1].name,query:this.historys[e+1].query,params:this.historys[e+1].params}):this.$router.push({name:this.historys[e-1].name,query:this.historys[e-1].query,params:this.historys[e-1].params})),this.historys.splice(e,1)}}},h=(i("8ce5"),i("d959")),f=i.n(h);const m=f()(l,[["render",r]]);e["default"]=m},"7f5c":function(t,e,i){},"8ce5":function(t,e,i){"use strict";i("7f5c")},a434:function(t,e,i){"use strict";var s=i("23e7"),n=i("23cb"),r=i("a691"),o=i("50c4"),a=i("7b0b"),c=i("65f0"),u=i("8418"),l=i("1dde"),h=l("splice"),f=Math.max,m=Math.min,b=9007199254740991,y="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!h},{splice:function(t,e){var i,s,l,h,d,p,v=a(this),g=o(v.length),O=n(t,g),j=arguments.length;if(0===j?i=s=0:1===j?(i=0,s=g-O):(i=j-2,s=m(f(r(e),0),g-O)),g+i-s>b)throw TypeError(y);for(l=c(v,s),h=0;h<s;h++)d=O+h,d in v&&u(l,h,v[d]);if(l.length=s,i<s){for(h=O;h<g-s;h++)d=h+s,p=h+i,d in v?v[p]=v[d]:delete v[p];for(h=g;h>g-s+i;h--)delete v[h-1]}else if(i>s)for(h=g-s;h>O;h--)d=h+s-1,p=h+i-1,d in v?v[p]=v[d]:delete v[p];for(h=0;h<i;h++)v[h+O]=arguments[h+2];return v.length=g-s+i,l}})},c740:function(t,e,i){"use strict";var s=i("23e7"),n=i("b727").findIndex,r=i("44d2"),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),s({target:"Array",proto:!0,forced:a},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r(o)}}]);