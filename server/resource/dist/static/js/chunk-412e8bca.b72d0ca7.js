(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-412e8bca","chunk-a915af30","chunk-7a46e8f8","chunk-2f06d38d","chunk-5629f238","chunk-72c723ce","chunk-2d0ccb97","chunk-2d237d31","chunk-2d0dacb6","chunk-2d0a4474"],{"0680":function(t,e,r){"use strict";r.r(e),r.d(e,"getDict",(function(){return i}));var n=r("1da1"),a=(r("96cf"),r("4360")),i=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["store"].dispatch("dictionary/getDictionary",e);case 2:return t.abrupt("return",a["store"].getters["dictionary/getDictionary"][e]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"0b16":function(t,e,r){},"0cb2":function(t,e,r){var n=r("7b0b"),a=Math.floor,i="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,r,c,s,d){var l=r+t.length,f=c.length,h=u;return void 0!==s&&(s=n(s),h=o),i.call(d,h,(function(n,i){var o;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(l);case"<":o=s[i.slice(1,-1)];break;default:var u=+i;if(0===u)return n;if(u>f){var d=a(u/10);return 0===d?n:d<=f?void 0===c[d-1]?i.charAt(1):c[d-1]+i.charAt(1):n}o=c[u-1]}return void 0===o?"":o}))}},"277d":function(t,e,r){var n=r("23e7"),a=r("e8b5");n({target:"Array",stat:!0},{isArray:a})},"2b09":function(t,e,r){"use strict";r.r(e);var n=r("7a23"),a={class:"clearflex"},i=Object(n["r"])("确 定");function o(t,e,r,o,u,c){var s=Object(n["W"])("el-button"),d=Object(n["W"])("el-tree");return Object(n["N"])(),Object(n["n"])("div",null,[Object(n["o"])("div",a,[Object(n["s"])(s,{class:"fl-right",size:"small",type:"primary",onClick:c.authApiEnter},{default:Object(n["lb"])((function(){return[i]})),_:1},8,["onClick"])]),Object(n["s"])(d,{ref:"apiTree",data:u.apiTreeData,"default-checked-keys":u.apiTreeIds,props:u.apiDefaultProps,"default-expand-all":"","highlight-current":"","node-key":"onlyId","show-checkbox":"",onCheck:c.nodeChange},null,8,["data","default-checked-keys","props","onCheck"])])}var u=r("ade3"),c=r("1da1"),s=(r("96cf"),r("d81d"),r("4ec3")),d=r("6cb5"),l={name:"Apis",props:{row:{default:function(){return{}},type:Object}},data:function(){return{apiTreeData:[],apiTreeIds:[],needConfirm:!1,apiDefaultProps:{children:"children",label:"description"}}},created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["getAllApis"])();case 2:return r=e.sent,n=r.data.apis,t.apiTreeData=t.buildApiTree(n),e.next=7,Object(d["getPolicyPathByAuthorityId"])({authorityId:t.row.authorityId});case 7:a=e.sent,t.activeUserId=t.row.authorityId,t.apiTreeIds=[],a.data.paths&&a.data.paths.map((function(e){t.apiTreeIds.push("p:"+e.path+"m:"+e.method)}));case 11:case"end":return e.stop()}}),e)})))()},methods:{nodeChange:function(){this.needConfirm=!0},enterAndNext:function(){this.authApiEnter()},buildApiTree:function(t){var e={};t&&t.map((function(t){t.onlyId="p:"+t.path+"m:"+t.method,Object.prototype.hasOwnProperty.call(e,t.apiGroup)?e[t.apiGroup].push(t):Object.assign(e,Object(u["a"])({},t.apiGroup,[t]))}));var r=[];for(var n in e){var a={ID:n,description:n+"组",children:e[n]};r.push(a)}return r},authApiEnter:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.$refs.apiTree.getCheckedNodes(!0),n=[],r&&r.map((function(t){var e={path:t.path,method:t.method};n.push(e)})),e.next=5,Object(d["UpdateCasbin"])({authorityId:t.activeUserId,casbinInfos:n});case 5:a=e.sent,0===a.code&&t.$message({type:"success",message:"api设置成功"});case 7:case"end":return e.stop()}}),e)})))()}}},f=r("d959"),h=r.n(f);const p=h()(l,[["render",o]]);e["default"]=p},"2dbd":function(t,e,r){"use strict";r.r(e);var n=r("7a23"),a={class:"clearflex",style:{margin:"18px"}},i=Object(n["r"])("确 定"),o=Object(n["r"])("全选"),u=Object(n["r"])("本角色"),c=Object(n["r"])("本角色及子角色");function s(t,e,r,s,d,l){var f=Object(n["W"])("el-button"),h=Object(n["W"])("el-checkbox"),p=Object(n["W"])("el-checkbox-group");return Object(n["N"])(),Object(n["n"])("div",null,[Object(n["o"])("div",a,[Object(n["s"])(f,{class:"fl-right",size:"small",type:"primary",onClick:l.authDataEnter},{default:Object(n["lb"])((function(){return[i]})),_:1},8,["onClick"]),Object(n["s"])(f,{class:"fl-left",size:"small",type:"primary",onClick:l.all},{default:Object(n["lb"])((function(){return[o]})),_:1},8,["onClick"]),Object(n["s"])(f,{class:"fl-left",size:"small",type:"primary",onClick:l.self},{default:Object(n["lb"])((function(){return[u]})),_:1},8,["onClick"]),Object(n["s"])(f,{class:"fl-left",size:"small",type:"primary",onClick:l.selfAndChildren},{default:Object(n["lb"])((function(){return[c]})),_:1},8,["onClick"])]),Object(n["s"])(p,{modelValue:d.dataAuthorityId,"onUpdate:modelValue":e[0]||(e[0]=function(t){return d.dataAuthorityId=t}),onChange:l.selectAuthority},{default:Object(n["lb"])((function(){return[(Object(n["N"])(!0),Object(n["n"])(n["b"],null,Object(n["U"])(d.authoritys,(function(t,e){return Object(n["N"])(),Object(n["l"])(h,{key:e,label:t},{default:Object(n["lb"])((function(){return[Object(n["r"])(Object(n["ab"])(t.authorityName),1)]})),_:2},1032,["label"])})),128))]})),_:1},8,["modelValue","onChange"])])}var d=r("1da1");r("277d");function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t){if(Array.isArray(t))return l(t)}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630");function h(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}r("fb6a"),r("b0c0");function p(t,e){if(t){if("string"===typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function b(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(t){return f(t)||h(t)||p(t)||b()}r("96cf"),r("d81d"),r("4de4"),r("c975");var m=r("fd85"),g={name:"Datas",props:{row:{default:function(){return{}},type:Object},authority:{default:function(){return[]},type:Array}},data:function(){return{authoritys:[],dataAuthorityId:[],needConfirm:!1}},created:function(){var t=this;this.authoritys=[],this.dataAuthorityId=[],this.roundAuthority(this.authority),this.row.dataAuthorityId&&this.row.dataAuthorityId.map((function(e){var r=t.authoritys&&t.authoritys.filter((function(t){return t.authorityId===e.authorityId}))&&t.authoritys.filter((function(t){return t.authorityId===e.authorityId}))[0];t.dataAuthorityId.push(r)}))},methods:{enterAndNext:function(){this.authDataEnter()},all:function(){this.dataAuthorityId=y(this.authoritys),this.$emit("changeRow","dataAuthorityId",this.dataAuthorityId),this.needConfirm=!0},self:function(){var t=this;this.dataAuthorityId=this.authoritys.filter((function(e){return e.authorityId===t.row.authorityId})),this.$emit("changeRow","dataAuthorityId",this.dataAuthorityId),this.needConfirm=!0},selfAndChildren:function(){var t=[];this.getChildrenId(this.row,t),this.dataAuthorityId=this.authoritys.filter((function(e){return t.indexOf(e.authorityId)>-1})),this.$emit("changeRow","dataAuthorityId",this.dataAuthorityId),this.needConfirm=!0},getChildrenId:function(t,e){var r=this;e.push(t.authorityId),t.children&&t.children.map((function(t){r.getChildrenId(t,e)}))},authDataEnter:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["setDataAuthority"])(t.row);case 2:r=e.sent,0===r.code&&t.$message({type:"success",message:"资源设置成功"});case 4:case"end":return e.stop()}}),e)})))()},roundAuthority:function(t){var e=this;t&&t.map((function(t){var r={};r.authorityId=t.authorityId,r.authorityName=t.authorityName,e.authoritys.push(r),t.children&&t.children.length&&e.roundAuthority(t.children)}))},selectAuthority:function(){this.$emit("changeRow","dataAuthorityId",this.dataAuthorityId),this.needConfirm=!0}}},O=r("d959"),v=r.n(O);const j=v()(g,[["render",s]]);e["default"]=j},"4d63":function(t,e,r){var n=r("83ab"),a=r("da84"),i=r("94ca"),o=r("7156"),u=r("9112"),c=r("9bf2").f,s=r("241c").f,d=r("44e7"),l=r("577e"),f=r("ad6d"),h=r("9f7f"),p=r("6eeb"),b=r("d039"),y=r("5135"),m=r("69f3").enforce,g=r("2626"),O=r("b622"),v=r("fce3"),j=r("107c"),A=O("match"),I=a.RegExp,w=I.prototype,k=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,x=/a/g,C=/a/g,R=new I(x)!==x,D=h.UNSUPPORTED_Y,N=n&&(!R||D||v||j||b((function(){return C[A]=!1,I(x)!=x||I(C)==C||"/a/i"!=I(x,"i")}))),T=function(t){for(var e,r=t.length,n=0,a="",i=!1;n<=r;n++)e=t.charAt(n),"\\"!==e?i||"."!==e?("["===e?i=!0:"]"===e&&(i=!1),a+=e):a+="[\\s\\S]":a+=e+t.charAt(++n);return a},$=function(t){for(var e,r=t.length,n=0,a="",i=[],o={},u=!1,c=!1,s=0,d="";n<=r;n++){if(e=t.charAt(n),"\\"===e)e+=t.charAt(++n);else if("]"===e)u=!1;else if(!u)switch(!0){case"["===e:u=!0;break;case"("===e:k.test(t.slice(n+1))&&(n+=2,c=!0),a+=e,s++;continue;case">"===e&&c:if(""===d||y(o,d))throw new SyntaxError("Invalid capture group name");o[d]=!0,i.push([d,s]),c=!1,d="";continue}c?d+=e:a+=e}return[a,i]};if(i("RegExp",N)){for(var _=function(t,e){var r,n,a,i,c,s,h=this instanceof _,p=d(t),b=void 0===e,y=[],g=t;if(!h&&p&&b&&t.constructor===_)return t;if((p||t instanceof _)&&(t=t.source,b&&(e="flags"in g?g.flags:f.call(g))),t=void 0===t?"":l(t),e=void 0===e?"":l(e),g=t,v&&"dotAll"in x&&(n=!!e&&e.indexOf("s")>-1,n&&(e=e.replace(/s/g,""))),r=e,D&&"sticky"in x&&(a=!!e&&e.indexOf("y")>-1,a&&(e=e.replace(/y/g,""))),j&&(i=$(t),t=i[0],y=i[1]),c=o(I(t,e),h?this:w,_),(n||a||y.length)&&(s=m(c),n&&(s.dotAll=!0,s.raw=_(T(t),r)),a&&(s.sticky=!0),y.length&&(s.groups=y)),t!==g)try{u(c,"source",""===g?"(?:)":g)}catch(O){}return c},E=function(t){t in _||c(_,t,{configurable:!0,get:function(){return I[t]},set:function(e){I[t]=e}})},S=s(I),F=0;S.length>F;)E(S[F++]);w.constructor=_,_.prototype=w,p(a,"RegExp",_)}g("RegExp")},"4df4":function(t,e,r){"use strict";var n=r("0366"),a=r("7b0b"),i=r("9bdd"),o=r("e95a"),u=r("50c4"),c=r("8418"),s=r("35a1");t.exports=function(t){var e,r,d,l,f,h,p=a(t),b="function"==typeof this?this:Array,y=arguments.length,m=y>1?arguments[1]:void 0,g=void 0!==m,O=s(p),v=0;if(g&&(m=n(m,y>2?arguments[2]:void 0,2)),void 0==O||b==Array&&o(O))for(e=u(p.length),r=new b(e);e>v;v++)h=g?m(p[v],v):p[v],c(r,v,h);else for(l=O.call(p),f=l.next,r=new b;!(d=f.call(l)).done;v++)h=g?i(l,m,[d.value,v],!0):d.value,c(r,v,h);return r.length=v,r}},"4ec3":function(t,e,r){"use strict";r.r(e),r.d(e,"getApiList",(function(){return a})),r.d(e,"createApi",(function(){return i})),r.d(e,"getApiById",(function(){return o})),r.d(e,"updateApi",(function(){return u})),r.d(e,"setAuthApi",(function(){return c})),r.d(e,"getAllApis",(function(){return s})),r.d(e,"deleteApi",(function(){return d})),r.d(e,"deleteApisByIds",(function(){return l}));var n=r("b775"),a=function(t){return Object(n["default"])({url:"/api/getApiList",method:"post",data:t})},i=function(t){return Object(n["default"])({url:"/api/createApi",method:"post",data:t})},o=function(t){return Object(n["default"])({url:"/api/getApiById",method:"post",data:t})},u=function(t){return Object(n["default"])({url:"/api/updateApi",method:"post",data:t})},c=function(t){return Object(n["default"])({url:"/api/setAuthApi",method:"post",data:t})},s=function(t){return Object(n["default"])({url:"/api/getAllApis",method:"post",data:t})},d=function(t){return Object(n["default"])({url:"/api/deleteApi",method:"post",data:t})},l=function(t){return Object(n["default"])({url:"/api/deleteApisByIds",method:"delete",data:t})}},5319:function(t,e,r){"use strict";var n=r("d784"),a=r("d039"),i=r("825a"),o=r("a691"),u=r("50c4"),c=r("577e"),s=r("1d80"),d=r("8aa5"),l=r("0cb2"),f=r("14c3"),h=r("b622"),p=h("replace"),b=Math.max,y=Math.min,m=function(t){return void 0===t?t:String(t)},g=function(){return"$0"==="a".replace(/./,"$0")}(),O=function(){return!!/./[p]&&""===/./[p]("a","$0")}(),v=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));n("replace",(function(t,e,r){var n=O?"$":"$0";return[function(t,r){var n=s(this),a=void 0==t?void 0:t[p];return void 0!==a?a.call(t,n,r):e.call(c(n),t,r)},function(t,a){var s=i(this),h=c(t);if("string"===typeof a&&-1===a.indexOf(n)&&-1===a.indexOf("$<")){var p=r(e,s,h,a);if(p.done)return p.value}var g="function"===typeof a;g||(a=c(a));var O=s.global;if(O){var v=s.unicode;s.lastIndex=0}var j=[];while(1){var A=f(s,h);if(null===A)break;if(j.push(A),!O)break;var I=c(A[0]);""===I&&(s.lastIndex=d(h,u(s.lastIndex),v))}for(var w="",k=0,x=0;x<j.length;x++){A=j[x];for(var C=c(A[0]),R=b(y(o(A.index),h.length),0),D=[],N=1;N<A.length;N++)D.push(m(A[N]));var T=A.groups;if(g){var $=[C].concat(D,R,h);void 0!==T&&$.push(T);var _=c(a.apply(void 0,$))}else _=l(C,h,R,D,T,a);R>=k&&(w+=h.slice(k,R)+_,k=R+C.length)}return w+h.slice(k)}]}),!v||!g||O)},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var n=r("1d80"),a=r("577e"),i=r("5899"),o="["+i+"]",u=RegExp("^"+o+o+"*"),c=RegExp(o+o+"*$"),s=function(t){return function(e){var r=a(n(e));return 1&t&&(r=r.replace(u,"")),2&t&&(r=r.replace(c,"")),r}};t.exports={start:s(1),end:s(2),trim:s(3)}},"6cb5":function(t,e,r){"use strict";r.r(e),r.d(e,"UpdateCasbin",(function(){return a})),r.d(e,"getPolicyPathByAuthorityId",(function(){return i}));var n=r("b775"),a=function(t){return Object(n["default"])({url:"/casbin/updateCasbin",method:"post",data:t})},i=function(t){return Object(n["default"])({url:"/casbin/getPolicyPathByAuthorityId",method:"post",data:t})}},7156:function(t,e,r){var n=r("861d"),a=r("d2bb");t.exports=function(t,e,r){var i,o;return a&&"function"==typeof(i=e.constructor)&&i!==r&&n(o=i.prototype)&&o!==r.prototype&&a(t,o),t}},"7cb9":function(t,e,r){"use strict";r("0b16")},"7f88":function(t,e,r){"use strict";r.r(e);var n=r("7a23"),a={class:"authority"},i={class:"button-box clearflex"},o=Object(n["r"])("新增角色"),u=Object(n["r"])("设置权限"),c=Object(n["r"])("新增子角色"),s=Object(n["r"])("拷贝"),d=Object(n["r"])("编辑"),l=Object(n["r"])("删除"),f=Object(n["o"])("span",{style:{color:"red","font-size":"12px"}},"注：右上角头像下拉可切换角色",-1),h={class:"dialog-footer"},p=Object(n["r"])("取 消"),b=Object(n["r"])("确 定");function y(t,e,r,y,m,g){var O=Object(n["W"])("el-button"),v=Object(n["W"])("el-table-column"),j=Object(n["W"])("el-table"),A=Object(n["W"])("el-cascader"),I=Object(n["W"])("el-form-item"),w=Object(n["W"])("el-input"),k=Object(n["W"])("el-form"),x=Object(n["W"])("el-dialog"),C=Object(n["W"])("Menus"),R=Object(n["W"])("el-tab-pane"),D=Object(n["W"])("Apis"),N=Object(n["W"])("Datas"),T=Object(n["W"])("el-tabs"),$=Object(n["W"])("el-drawer");return Object(n["N"])(),Object(n["n"])("div",a,[Object(n["o"])("div",i,[Object(n["s"])(O,{size:"mini",type:"primary",icon:"el-icon-plus",onClick:e[0]||(e[0]=function(t){return g.addAuthority("0")})},{default:Object(n["lb"])((function(){return[o]})),_:1})]),Object(n["s"])(j,{data:t.tableData,"tree-props":{children:"children",hasChildren:"hasChildren"},border:"","row-key":"authorityId",stripe:"",style:{width:"100%"}},{default:Object(n["lb"])((function(){return[Object(n["s"])(v,{label:"角色id","min-width":"180",prop:"authorityId"}),Object(n["s"])(v,{label:"角色名称","min-width":"180",prop:"authorityName"}),Object(n["s"])(v,{fixed:"right",label:"操作",width:"460"},{default:Object(n["lb"])((function(t){return[Object(n["s"])(O,{size:"mini",type:"primary",onClick:function(e){return g.opdendrawer(t.row)}},{default:Object(n["lb"])((function(){return[u]})),_:2},1032,["onClick"]),Object(n["s"])(O,{icon:"el-icon-plus",size:"mini",type:"primary",onClick:function(e){return g.addAuthority(t.row.authorityId)}},{default:Object(n["lb"])((function(){return[c]})),_:2},1032,["onClick"]),Object(n["s"])(O,{icon:"el-icon-copy-document",size:"mini",type:"primary",onClick:function(e){return g.copyAuthority(t.row)}},{default:Object(n["lb"])((function(){return[s]})),_:2},1032,["onClick"]),Object(n["s"])(O,{icon:"el-icon-edit",size:"mini",type:"primary",onClick:function(e){return g.editAuthority(t.row)}},{default:Object(n["lb"])((function(){return[d]})),_:2},1032,["onClick"]),Object(n["s"])(O,{icon:"el-icon-delete",size:"mini",type:"danger",onClick:function(e){return g.deleteAuth(t.row)}},{default:Object(n["lb"])((function(){return[l]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),f,Object(n["s"])(x,{modelValue:m.dialogFormVisible,"onUpdate:modelValue":e[4]||(e[4]=function(t){return m.dialogFormVisible=t}),title:m.dialogTitle},{footer:Object(n["lb"])((function(){return[Object(n["o"])("div",h,[Object(n["s"])(O,{onClick:g.closeDialog},{default:Object(n["lb"])((function(){return[p]})),_:1},8,["onClick"]),Object(n["s"])(O,{type:"primary",onClick:g.enterDialog},{default:Object(n["lb"])((function(){return[b]})),_:1},8,["onClick"])])]})),default:Object(n["lb"])((function(){return[Object(n["s"])(k,{ref:"authorityForm",model:m.form,rules:m.rules},{default:Object(n["lb"])((function(){return[Object(n["s"])(I,{label:"父级角色",prop:"parentId"},{default:Object(n["lb"])((function(){return[Object(n["s"])(A,{modelValue:m.form.parentId,"onUpdate:modelValue":e[1]||(e[1]=function(t){return m.form.parentId=t}),disabled:"add"==m.dialogType,options:m.AuthorityOption,props:{checkStrictly:!0,label:"authorityName",value:"authorityId",disabled:"disabled",emitPath:!1},"show-all-levels":!1,filterable:""},null,8,["modelValue","disabled","options"])]})),_:1}),Object(n["s"])(I,{label:"角色ID",prop:"authorityId"},{default:Object(n["lb"])((function(){return[Object(n["s"])(w,{modelValue:m.form.authorityId,"onUpdate:modelValue":e[2]||(e[2]=function(t){return m.form.authorityId=t}),disabled:"edit"==m.dialogType,autocomplete:"off"},null,8,["modelValue","disabled"])]})),_:1}),Object(n["s"])(I,{label:"角色姓名",prop:"authorityName"},{default:Object(n["lb"])((function(){return[Object(n["s"])(w,{modelValue:m.form.authorityName,"onUpdate:modelValue":e[3]||(e[3]=function(t){return m.form.authorityName=t}),autocomplete:"off"},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue","title"]),m.drawer?(Object(n["N"])(),Object(n["l"])($,{key:0,modelValue:m.drawer,"onUpdate:modelValue":e[5]||(e[5]=function(t){return m.drawer=t}),"with-header":!1,size:"40%",title:"角色配置"},{default:Object(n["lb"])((function(){return[Object(n["s"])(T,{"before-leave":g.autoEnter,class:"role-box",type:"border-card"},{default:Object(n["lb"])((function(){return[Object(n["s"])(R,{label:"角色菜单"},{default:Object(n["lb"])((function(){return[Object(n["s"])(C,{ref:"menus",row:m.activeRow,onChangeRow:g.changeRow},null,8,["row","onChangeRow"])]})),_:1}),Object(n["s"])(R,{label:"角色api"},{default:Object(n["lb"])((function(){return[Object(n["s"])(D,{ref:"apis",row:m.activeRow,onChangeRow:g.changeRow},null,8,["row","onChangeRow"])]})),_:1}),Object(n["s"])(R,{label:"资源权限"},{default:Object(n["lb"])((function(){return[Object(n["s"])(N,{ref:"datas",authority:t.tableData,row:m.activeRow,onChangeRow:g.changeRow},null,8,["authority","row","onChangeRow"])]})),_:1})]})),_:1},8,["before-leave"])]})),_:1},8,["modelValue"])):Object(n["m"])("",!0)])}var m=r("1da1"),g=(r("d81d"),r("96cf"),r("fd85")),O=r("d0c0"),v=r("2b09"),j=r("2dbd"),A=r("a4a2"),I={name:"Authority",components:{Menus:O["default"],Apis:v["default"],Datas:j["default"]},mixins:[A["default"]],data:function(){var t=function(t,e,r){return/^[0-9]*[1-9][0-9]*$/.test(e)?r():r(new Error("请输入正整数"))};return{AuthorityOption:[{authorityId:"0",authorityName:"根角色"}],listApi:g["getAuthorityList"],drawer:!1,dialogType:"add",activeRow:{},activeUserId:0,dialogTitle:"新增角色",dialogFormVisible:!1,apiDialogFlag:!1,copyForm:{},form:{authorityId:"",authorityName:"",parentId:"0"},rules:{authorityId:[{required:!0,message:"请输入角色ID",trigger:"blur"},{validator:t,trigger:"blur"}],authorityName:[{required:!0,message:"请输入角色名",trigger:"blur"}],parentId:[{required:!0,message:"请选择请求方式",trigger:"blur"}]}}},created:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.pageSize=999,e.next=3,t.getTableData();case 3:case"end":return e.stop()}}),e)})))()},methods:{changeRow:function(t,e){this.activeRow[t]=e},autoEnter:function(t,e){var r=["menus","apis","datas"];e&&this.$refs[r[e]].needConfirm&&(this.$refs[r[e]].enterAndNext(),this.$refs[r[e]].needConfirm=!1)},copyAuthority:function(t){for(var e in this.setOptions(),this.dialogTitle="拷贝角色",this.dialogType="copy",this.form)this.form[e]=t[e];this.copyForm=t,this.dialogFormVisible=!0},opdendrawer:function(t){this.drawer=!0,this.activeRow=t},deleteAuth:function(t){var e=this;this.$confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(m["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(g["deleteAuthority"])({authorityId:t.authorityId});case 2:n=r.sent,0===n.code&&(e.$message({type:"success",message:"删除成功!"}),1===e.tableData.length&&e.page>1&&e.page--,e.getTableData());case 4:case"end":return r.stop()}}),r)}))))["catch"]((function(){e.$message({type:"info",message:"已取消删除"})}))},initForm:function(){this.$refs.authorityForm&&this.$refs.authorityForm.resetFields(),this.form={authorityId:"",authorityName:"",parentId:"0"}},closeDialog:function(){this.initForm(),this.dialogFormVisible=!1,this.apiDialogFlag=!1},enterDialog:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("0"!==t.form.authorityId){e.next=3;break}return t.$message({type:"error",message:"角色id不能为0"}),e.abrupt("return",!1);case 3:t.$refs.authorityForm.validate(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(r){var n,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=26;break}e.t0=t.dialogType,e.next="add"===e.t0?4:"edit"===e.t0?9:"copy"===e.t0?14:24;break;case 4:return e.next=6,Object(g["createAuthority"])(t.form);case 6:return n=e.sent,0===n.code&&(t.$message({type:"success",message:"添加成功!"}),t.getTableData(),t.closeDialog()),e.abrupt("break",24);case 9:return e.next=11,Object(g["updateAuthority"])(t.form);case 11:return a=e.sent,0===a.code&&(t.$message({type:"success",message:"添加成功!"}),t.getTableData(),t.closeDialog()),e.abrupt("break",24);case 14:return i={authority:{authorityId:"string",authorityName:"string",datauthorityId:[],parentId:"string"},oldAuthorityId:0},i.authority.authorityId=t.form.authorityId,i.authority.authorityName=t.form.authorityName,i.authority.parentId=t.form.parentId,i.authority.dataAuthorityId=t.copyForm.dataAuthorityId,i.oldAuthorityId=t.copyForm.authorityId,e.next=22,Object(g["copyAuthority"])(i);case 22:o=e.sent,0===o.code&&(t.$message({type:"success",message:"复制成功！"}),t.getTableData());case 24:t.initForm(),t.dialogFormVisible=!1;case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))()},setOptions:function(){this.AuthorityOption=[{authorityId:"0",authorityName:"根角色"}],this.setAuthorityOptions(this.tableData,this.AuthorityOption,!1)},setAuthorityOptions:function(t,e,r){var n=this;this.form.authorityId=String(this.form.authorityId),t&&t.map((function(t){if(t.children&&t.children.length){var a={authorityId:t.authorityId,authorityName:t.authorityName,disabled:r||t.authorityId===n.form.authorityId,children:[]};n.setAuthorityOptions(t.children,a.children,r||t.authorityId===n.form.authorityId),e.push(a)}else{var i={authorityId:t.authorityId,authorityName:t.authorityName,disabled:r||t.authorityId===n.form.authorityId};e.push(i)}}))},addAuthority:function(t){this.initForm(),this.dialogTitle="新增角色",this.dialogType="add",this.form.parentId=t,this.setOptions(),this.dialogFormVisible=!0},editAuthority:function(t){for(var e in this.setOptions(),this.dialogTitle="编辑角色",this.dialogType="edit",this.form)this.form[e]=t[e];this.setOptions(),this.dialogFormVisible=!0}}},w=(r("7cb9"),r("d959")),k=r.n(w);const x=k()(I,[["render",y]]);e["default"]=x},"9bdd":function(t,e,r){var n=r("825a"),a=r("2a62");t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(o){throw a(t),o}}},a4a2:function(t,e,r){"use strict";r.r(e);var n=r("5530"),a=r("1da1"),i=(r("96cf"),r("0d03"),r("4de4"),r("0680")),o=r("c466");e["default"]={data:function(){return{page:1,total:10,pageSize:10,tableData:[],searchInfo:{}}},methods:{formatBoolean:function(t){return null!==t?t?"是":"否":""},formatDate:function(t){if(null!==t&&""!==t){var e=new Date(t);return Object(o["formatTimeToStr"])(e,"yyyy-MM-dd hh:mm:ss")}return""},filterDict:function(t,e){var r=this[e+"Options"]&&this[e+"Options"].filter((function(e){return e.value===t}));return r&&r[0]&&r[0].label},getDict:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["getDict"])(t);case 2:return n=r.sent,e[t+"Options"]=n,r.abrupt("return",n);case 5:case"end":return r.stop()}}),r)})))()},handleSizeChange:function(t){this.pageSize=t,this.getTableData()},handleCurrentChange:function(t){this.page=t,this.getTableData()},getTableData:function(){var t=arguments,e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var a,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.length>0&&void 0!==t[0]?t[0]:e.page,i=t.length>1&&void 0!==t[1]?t[1]:e.pageSize,r.next=4,e.listApi(Object(n["a"])({page:a,pageSize:i},e.searchInfo));case 4:o=r.sent,0===o.code&&(e.tableData=o.data.list,e.total=o.data.total,e.page=o.data.page,e.pageSize=o.data.pageSize);case 6:case"end":return r.stop()}}),r)})))()}}}},a630:function(t,e,r){var n=r("23e7"),a=r("4df4"),i=r("1c7e"),o=!i((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:o},{from:a})},a9e3:function(t,e,r){"use strict";var n=r("83ab"),a=r("da84"),i=r("94ca"),o=r("6eeb"),u=r("5135"),c=r("c6b6"),s=r("7156"),d=r("d9b5"),l=r("c04e"),f=r("d039"),h=r("7c73"),p=r("241c").f,b=r("06cf").f,y=r("9bf2").f,m=r("58a8").trim,g="Number",O=a[g],v=O.prototype,j=c(h(v))==g,A=function(t){if(d(t))throw TypeError("Cannot convert a Symbol value to a number");var e,r,n,a,i,o,u,c,s=l(t,"number");if("string"==typeof s&&s.length>2)if(s=m(s),e=s.charCodeAt(0),43===e||45===e){if(r=s.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(s.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+s}for(i=s.slice(2),o=i.length,u=0;u<o;u++)if(c=i.charCodeAt(u),c<48||c>a)return NaN;return parseInt(i,n)}return+s};if(i(g,!O(" 0o1")||!O("0b1")||O("+0x1"))){for(var I,w=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof w&&(j?f((function(){v.valueOf.call(r)})):c(r)!=g)?s(new O(A(e)),r,w):A(e)},k=n?p(O):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;k.length>x;x++)u(O,I=k[x])&&!u(w,I)&&y(w,I,b(O,I));w.prototype=v,v.constructor=w,o(a,g,w)}},c466:function(t,e,r){"use strict";r.r(e),r.d(e,"formatTimeToStr",(function(){return n}));r("0d03"),r("ac1f"),r("5319"),r("4d63"),r("25f0");function n(t,e){var r=new Date(t).Format("yyyy-MM-dd hh:mm:ss");return e&&(r=new Date(t).Format(e)),r.toLocaleString()}Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?e[r]:("00"+e[r]).substr((""+e[r]).length)));return t}},d0c0:function(t,e,r){"use strict";r.r(e);r("b0c0");var n=r("7a23"),a={class:"clearflex"},i=Object(n["r"])("确 定"),o={class:"custom-tree-node"};function u(t,e,r,u,c,s){var d=Object(n["W"])("el-button"),l=Object(n["W"])("el-tree");return Object(n["N"])(),Object(n["n"])("div",null,[Object(n["o"])("div",a,[Object(n["s"])(d,{class:"fl-right",size:"small",type:"primary",onClick:s.relation},{default:Object(n["lb"])((function(){return[i]})),_:1},8,["onClick"])]),Object(n["s"])(l,{ref:"menuTree",data:c.menuTreeData,"default-checked-keys":c.menuTreeIds,props:c.menuDefaultProps,"default-expand-all":"","highlight-current":"","node-key":"ID","show-checkbox":"",onCheck:s.nodeChange},{default:Object(n["lb"])((function(t){var e=t.node,a=t.data;return[Object(n["o"])("span",o,[Object(n["o"])("span",null,Object(n["ab"])(e.label),1),Object(n["o"])("span",null,[Object(n["s"])(d,{type:"text",size:"mini",style:Object(n["E"])({color:r.row.defaultRouter===a.name?"#E6A23C":"#85ce61"}),disabled:!e.checked,onClick:function(){return s.setDefault(a)}},{default:Object(n["lb"])((function(){return[Object(n["r"])(Object(n["ab"])(r.row.defaultRouter===a.name?"首页":"设为首页"),1)]})),_:2},1032,["style","disabled","onClick"])])])]})),_:1},8,["data","default-checked-keys","props","onCheck"])])}var c=r("1da1"),s=(r("96cf"),r("d81d"),r("45fc"),r("a9e3"),r("1f27")),d=r("fd85"),l={name:"Menus",props:{row:{default:function(){return{}},type:Object}},data:function(){return{menuTreeData:[],menuTreeIds:[],needConfirm:!1,menuDefaultProps:{children:"children",label:function(t){return t.meta.title}}}},created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["getBaseMenuTree"])();case 2:return r=e.sent,t.menuTreeData=r.data.menus,e.next=6,Object(s["getMenuAuthority"])({authorityId:t.row.authorityId});case 6:n=e.sent,a=n.data.menus,i=[],a.map((function(t){a.some((function(e){return e.parentId===t.menuId}))||i.push(Number(t.menuId))})),t.menuTreeIds=i;case 11:case"end":return e.stop()}}),e)})))()},methods:{setDefault:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(d["updateAuthority"])({authorityId:e.row.authorityId,AuthorityName:e.row.authorityName,parentId:e.row.parentId,defaultRouter:t.name});case 2:n=r.sent,0===n.code&&(e.$message({type:"success",message:"设置成功"}),e.$emit("changeRow","defaultRouter",n.data.authority.defaultRouter));case 4:case"end":return r.stop()}}),r)})))()},nodeChange:function(){this.needConfirm=!0},enterAndNext:function(){this.relation()},relation:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.$refs.menuTree.getCheckedNodes(!1,!0),e.next=3,Object(s["addMenuAuthority"])({menus:r,authorityId:t.row.authorityId});case 3:n=e.sent,0===n.code&&t.$message({type:"success",message:"菜单设置成功!"});case 5:case"end":return e.stop()}}),e)})))()}}},f=r("d959"),h=r.n(f);const p=h()(l,[["render",u]]);e["default"]=p},d28b:function(t,e,r){var n=r("746f");n("iterator")},e01a:function(t,e,r){"use strict";var n=r("23e7"),a=r("83ab"),i=r("da84"),o=r("5135"),u=r("861d"),c=r("9bf2").f,s=r("e893"),d=i.Symbol;if(a&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var l={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new d(t):void 0===t?d():d(t);return""===t&&(l[e]=!0),e};s(f,d);var h=f.prototype=d.prototype;h.constructor=f;var p=h.toString,b="Symbol(test)"==String(d("test")),y=/^Symbol\((.*)\)[^)]+$/;c(h,"description",{configurable:!0,get:function(){var t=u(this)?this.valueOf():this,e=p.call(t);if(o(l,t))return"";var r=b?e.slice(7,-1):e.replace(y,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:f})}},fb6a:function(t,e,r){"use strict";var n=r("23e7"),a=r("861d"),i=r("e8b5"),o=r("23cb"),u=r("50c4"),c=r("fc6a"),s=r("8418"),d=r("b622"),l=r("1dde"),f=l("slice"),h=d("species"),p=[].slice,b=Math.max;n({target:"Array",proto:!0,forced:!f},{slice:function(t,e){var r,n,d,l=c(this),f=u(l.length),y=o(t,f),m=o(void 0===e?f:e,f);if(i(l)&&(r=l.constructor,"function"!=typeof r||r!==Array&&!i(r.prototype)?a(r)&&(r=r[h],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return p.call(l,y,m);for(n=new(void 0===r?Array:r)(b(m-y,0)),d=0;y<m;y++,d++)y in l&&s(n,d,l[y]);return n.length=d,n}})},fd85:function(t,e,r){"use strict";r.r(e),r.d(e,"getAuthorityList",(function(){return a})),r.d(e,"deleteAuthority",(function(){return i})),r.d(e,"createAuthority",(function(){return o})),r.d(e,"copyAuthority",(function(){return u})),r.d(e,"setDataAuthority",(function(){return c})),r.d(e,"updateAuthority",(function(){return s}));var n=r("b775"),a=function(t){return Object(n["default"])({url:"/authority/getAuthorityList",method:"post",data:t})},i=function(t){return Object(n["default"])({url:"/authority/deleteAuthority",method:"post",data:t})},o=function(t){return Object(n["default"])({url:"/authority/createAuthority",method:"post",data:t})},u=function(t){return Object(n["default"])({url:"/authority/copyAuthority",method:"post",data:t})},c=function(t){return Object(n["default"])({url:"/authority/setDataAuthority",method:"post",data:t})},s=function(t){return Object(n["default"])({url:"/authority/updateAuthority",method:"put",data:t})}}}]);