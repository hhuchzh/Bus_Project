(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72c723ce","chunk-2d0ccb97","chunk-2d0dacb6"],{"2b09":function(t,e,n){"use strict";n.r(e);var r=n("7a23"),a={class:"clearflex"},i=Object(r["r"])("确 定");function u(t,e,n,u,c,d){var o=Object(r["W"])("el-button"),p=Object(r["W"])("el-tree");return Object(r["N"])(),Object(r["n"])("div",null,[Object(r["o"])("div",a,[Object(r["s"])(o,{class:"fl-right",size:"small",type:"primary",onClick:d.authApiEnter},{default:Object(r["lb"])((function(){return[i]})),_:1},8,["onClick"])]),Object(r["s"])(p,{ref:"apiTree",data:c.apiTreeData,"default-checked-keys":c.apiTreeIds,props:c.apiDefaultProps,"default-expand-all":"","highlight-current":"","node-key":"onlyId","show-checkbox":"",onCheck:d.nodeChange},null,8,["data","default-checked-keys","props","onCheck"])])}var c=n("ade3"),d=n("1da1"),o=(n("96cf"),n("d81d"),n("4ec3")),p=n("6cb5"),s={name:"Apis",props:{row:{default:function(){return{}},type:Object}},data:function(){return{apiTreeData:[],apiTreeIds:[],needConfirm:!1,apiDefaultProps:{children:"children",label:"description"}}},created:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["getAllApis"])();case 2:return n=e.sent,r=n.data.apis,t.apiTreeData=t.buildApiTree(r),e.next=7,Object(p["getPolicyPathByAuthorityId"])({authorityId:t.row.authorityId});case 7:a=e.sent,t.activeUserId=t.row.authorityId,t.apiTreeIds=[],a.data.paths&&a.data.paths.map((function(e){t.apiTreeIds.push("p:"+e.path+"m:"+e.method)}));case 11:case"end":return e.stop()}}),e)})))()},methods:{nodeChange:function(){this.needConfirm=!0},enterAndNext:function(){this.authApiEnter()},buildApiTree:function(t){var e={};t&&t.map((function(t){t.onlyId="p:"+t.path+"m:"+t.method,Object.prototype.hasOwnProperty.call(e,t.apiGroup)?e[t.apiGroup].push(t):Object.assign(e,Object(c["a"])({},t.apiGroup,[t]))}));var n=[];for(var r in e){var a={ID:r,description:r+"组",children:e[r]};n.push(a)}return n},authApiEnter:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$refs.apiTree.getCheckedNodes(!0),r=[],n&&n.map((function(t){var e={path:t.path,method:t.method};r.push(e)})),e.next=5,Object(p["UpdateCasbin"])({authorityId:t.activeUserId,casbinInfos:r});case 5:a=e.sent,0===a.code&&t.$message({type:"success",message:"api设置成功"});case 7:case"end":return e.stop()}}),e)})))()}}},l=n("d959"),h=n.n(l);const f=h()(s,[["render",u]]);e["default"]=f},"4ec3":function(t,e,n){"use strict";n.r(e),n.d(e,"getApiList",(function(){return a})),n.d(e,"createApi",(function(){return i})),n.d(e,"getApiById",(function(){return u})),n.d(e,"updateApi",(function(){return c})),n.d(e,"setAuthApi",(function(){return d})),n.d(e,"getAllApis",(function(){return o})),n.d(e,"deleteApi",(function(){return p})),n.d(e,"deleteApisByIds",(function(){return s}));var r=n("b775"),a=function(t){return Object(r["default"])({url:"/api/getApiList",method:"post",data:t})},i=function(t){return Object(r["default"])({url:"/api/createApi",method:"post",data:t})},u=function(t){return Object(r["default"])({url:"/api/getApiById",method:"post",data:t})},c=function(t){return Object(r["default"])({url:"/api/updateApi",method:"post",data:t})},d=function(t){return Object(r["default"])({url:"/api/setAuthApi",method:"post",data:t})},o=function(t){return Object(r["default"])({url:"/api/getAllApis",method:"post",data:t})},p=function(t){return Object(r["default"])({url:"/api/deleteApi",method:"post",data:t})},s=function(t){return Object(r["default"])({url:"/api/deleteApisByIds",method:"delete",data:t})}},"6cb5":function(t,e,n){"use strict";n.r(e),n.d(e,"UpdateCasbin",(function(){return a})),n.d(e,"getPolicyPathByAuthorityId",(function(){return i}));var r=n("b775"),a=function(t){return Object(r["default"])({url:"/casbin/updateCasbin",method:"post",data:t})},i=function(t){return Object(r["default"])({url:"/casbin/getPolicyPathByAuthorityId",method:"post",data:t})}}}]);