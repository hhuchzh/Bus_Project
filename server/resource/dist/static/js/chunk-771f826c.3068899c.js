(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-771f826c","chunk-2d216051","chunk-2d21f2d8"],{2426:function(e,n,t){},"45c6":function(e,n,t){"use strict";t.r(n);var a=t("7a23");Object(a["Q"])("data-v-10887658");var c={class:"search-term"},r=Object(a["r"])("实时位置查询"),o=Object(a["o"])("div",{id:"container",style:{width:"1600px",height:"750px"}},null,-1);function i(e,n,t,i,u,s){var l=Object(a["W"])("el-option"),d=Object(a["W"])("el-select"),f=Object(a["W"])("el-form-item"),p=Object(a["W"])("el-button"),I=Object(a["W"])("el-form");return Object(a["N"])(),Object(a["n"])("div",null,[Object(a["o"])("div",c,[Object(a["s"])(I,{inline:!0,model:e.searchInfo,class:"demo-form-inline"},{default:Object(a["lb"])((function(){return[Object(a["s"])(f,{label:"车牌号:",prop:"busId"},{default:Object(a["lb"])((function(){return[Object(a["s"])(d,{modelValue:u.currentSelectedPlate,"onUpdate:modelValue":n[0]||(n[0]=function(e){return u.currentSelectedPlate=e}),placeholder:"请选择",onChange:n[1]||(n[1]=function(e){return s.changeOption(e)})},{default:Object(a["lb"])((function(){return[(Object(a["N"])(!0),Object(a["n"])(a["b"],null,Object(a["U"])(u.busInfoList,(function(e){return Object(a["N"])(),Object(a["l"])(l,{key:e.busPlate,label:e.busPlate,value:e.ID},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(a["s"])(f,null,{default:Object(a["lb"])((function(){return[Object(a["s"])(p,{size:"mini",type:"primary",icon:"el-icon-search",onClick:s.onSubmit},{default:Object(a["lb"])((function(){return[r]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"])]),o])}Object(a["O"])();var u=t("1da1"),s=(t("d81d"),t("a9e3"),t("4795"),t("0d03"),t("96cf"),t("c14a")),l=t("d95b"),d={data:function(){return{map:{},busInfoList:[],currentSelectedID:-1,currentSelectedPlate:"",currentSelectGPSSN:"",preMarker:null,carIcon_0:null,carIcon_1:null,carIcon_2:null,carIcon_3:null,carIcon_4:null,carIcon_5:null,carIcon_6:null,carIcon_7:null,carIcon_static_0:null,carIcon_static_1:null,carIcon_static_2:null,carIcon_static_3:null,carIcon_static_4:null,carIcon_static_5:null,carIcon_static_6:null,carIcon_static_7:null,currentBound:null,currentLabel:null,timerId:null}},created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.getBusInfos();case 1:case"end":return n.stop()}}),n)})))()},mounted:function(){this.loadJScript()},methods:{getBusInfos:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["getBusInfoList"])();case 2:t=n.sent,0===t.code&&(e.busInfoList=t.data.list,e.busInfoList&&e.busInfoList.length>0?(e.currentSelectedPlate=e.busInfoList[0].busPlate,e.currentSelectedID=e.busInfoList[0].ID,e.getBusInfo()):(e.currentSelectedPlate="",e.currentSelectedID=-1));case 4:case"end":return n.stop()}}),n)})))()},changeOption:function(e){this.currentSelectedID=e,this.getBusInfo()},getBusInfo:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["findBusInfo"])({ID:e.currentSelectedID});case 2:t=n.sent,0===t.code&&t.data.rebusInfo&&t.data.rebusInfo.gpsInfos[0]&&(e.currentSelectGPSSN=t.data.rebusInfo.gpsInfos[0].gpsSn);case 4:case"end":return n.stop()}}),n)})))()},loadJScript:function(){var e=this,n=document.createElement("script");n.type="text/javascript",n.src="//api.map.baidu.com/getscript?v=2.0&ak=qG1aM2UK80lGHVHKmHczRcmzBBOd8blK",n.onload=function(){var n=window.BMap;e.carIcon_0=new n.Icon("./images/car_0.png",new n.Size(48,48)),e.carIcon_1=new n.Icon("./images/car_1.png",new n.Size(48,48)),e.carIcon_2=new n.Icon("./images/car_2.png",new n.Size(48,48)),e.carIcon_3=new n.Icon("./images/car_3.png",new n.Size(48,48)),e.carIcon_4=new n.Icon("./images/car_4.png",new n.Size(48,48)),e.carIcon_5=new n.Icon("./images/car_5.png",new n.Size(48,48)),e.carIcon_6=new n.Icon("./images/car_6.png",new n.Size(48,48)),e.carIcon_7=new n.Icon("./images/car_7.png",new n.Size(48,48)),e.carIcon_static_0=new n.Icon("./images/car_static_0.png",new n.Size(48,48)),e.carIcon_static_1=new n.Icon("./images/car_static_1.png",new n.Size(48,48)),e.carIcon_static_2=new n.Icon("./images/car_static_2.png",new n.Size(48,48)),e.carIcon_static_3=new n.Icon("./images/car_static_3.png",new n.Size(48,48)),e.carIcon_static_4=new n.Icon("./images/car_static_4.png",new n.Size(48,48)),e.carIcon_static_5=new n.Icon("./images/car_static_5.png",new n.Size(48,48)),e.carIcon_static_6=new n.Icon("./images/car_static_6.png",new n.Size(48,48)),e.carIcon_static_7=new n.Icon("./images/car_static_7.png",new n.Size(48,48)),e.currentLabel=new window.BMap.Label("速度: 0 KM/H",{offset:new window.BMap.Size(35,-75)}),e.currentLabel.setStyle({color:"#fff",backgroundColor:"#333333",border:"0",fontSize:"14px",width:"200px",height:"80px",opacity:"0.8",verticalAlign:"center",textAlign:"left",borderRadius:"2px",whiteSpace:"normal",wordWrap:"break-word",padding:"5px"})},document.body.appendChild(n)},setZoom:function(e){!1===this.currentBound.containsPoint(e)&&(this.map.centerAndZoom(e,18),this.currentBound=this.map.getBounds())},addMarker:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var t,a,c,r,o,i,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(l["getLocation"])({gpsSn:e.currentSelectGPSSN});case 2:t=n.sent,0===t.code&&(a=window.BMap,c=new a.Point(t.data.location.lng,t.data.location.lat),console.log("aaaaaaaaaaaaaaaaaaaaaaaaa : "+t.data.location.accStatus),r=null,o=Number(t.data.location.dir),i="关",0===o||360===o?0===t.data.location.accStatus?(r=new window.BMap.Marker(c,{icon:e.carIcon_static_0}),i="关"):(r=new window.BMap.Marker(c,{icon:e.carIcon_0}),i="开"):o>0&&o<90?0===t.data.location.accStatus?(r=new window.BMap.Marker(c,{icon:e.carIcon_static_1}),i="关"):(r=new window.BMap.Marker(c,{icon:e.carIcon_1}),i="开"):90===o?0===t.data.location.accStatus?(r=new window.BMap.Marker(c,{icon:e.carIcon_static_2}),i="关"):(r=new window.BMap.Marker(c,{icon:e.carIcon_2}),i="开"):o>90&&o<180?0===t.data.location.accStatus?(r=new window.BMap.Marker(c,{icon:e.carIcon_static_3}),i="关"):(r=new window.BMap.Marker(c,{icon:e.carIcon_3}),i="开"):180===o?0===t.data.location.accStatus?(r=new window.BMap.Marker(c,{icon:e.carIcon_static_4}),i="关"):(r=new window.BMap.Marker(c,{icon:e.carIcon_4}),i="开"):o>180&&o<270?0===t.data.location.accStatus?(r=new window.BMap.Marker(c,{icon:e.carIcon_static_5}),i="关"):(r=new window.BMap.Marker(c,{icon:e.carIcon_5}),i="开"):270===o?0===t.data.location.accStatus?(r=new window.BMap.Marker(c,{icon:e.carIcon_static_6}),i="关"):(r=new window.BMap.Marker(c,{icon:e.carIcon_6}),i="开"):o>270&&o<360&&(0===t.data.location.accStatus?(r=new window.BMap.Marker(c,{icon:e.carIcon_static_7}),i="关"):(r=new window.BMap.Marker(c,{icon:e.carIcon_7}),i="开")),u="速度: "+t.data.location.speed+" KM/H",u+="<br>",u+="IMEI : "+e.currentSelectGPSSN,u+="<br>",u+="ACC : "+i,u+="<br>",u+="定位时间 : "+e.getNowDate(),u+="<br>",e.currentLabel.setContent(u),r.setLabel(e.currentLabel),e.setZoom(c),null!=e.preMarker&&e.map.removeOverlay(e.preMarker),e.map.addOverlay(r),e.preMarker=r,null!=e.timerId&&clearTimeout(e.timerId),e.timerId=setTimeout(e.addMarker,5e3));case 4:case"end":return n.stop()}}),n)})))()},getNowDate:function(){var e=new Date,n=e.getFullYear(),t=e.getMonth()+1,a=e.getDate(),c=e.getHours(),r=e.getMinutes(),o=e.getSeconds(),i=n+"-"+t+"-"+a+" "+c+":"+r+":"+o;return i},showRealTimePath:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var t,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(l["getLocation"])({gpsSn:e.currentSelectGPSSN});case 2:t=n.sent,0===t.code&&(null!=e.timerId&&clearTimeout(e.timerId),a=window.BMap,e.map=new a.Map("container"),e.map.enableScrollWheelZoom(!0),e.map.addControl(new a.NavigationControl),c=new a.Point(t.data.location.lng,t.data.location.lat),e.map.centerAndZoom(c,18),e.currentBound=e.map.getBounds(),e.addMarker());case 4:case"end":return n.stop()}}),n)})))()},onSubmit:function(){this.showRealTimePath()}}},f=(t("b734"),t("d959")),p=t.n(f);const I=p()(d,[["render",i],["__scopeId","data-v-10887658"]]);n["default"]=I},5899:function(e,n){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,n,t){var a=t("1d80"),c=t("577e"),r=t("5899"),o="["+r+"]",i=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),s=function(e){return function(n){var t=c(a(n));return 1&e&&(t=t.replace(i,"")),2&e&&(t=t.replace(u,"")),t}};e.exports={start:s(1),end:s(2),trim:s(3)}},7156:function(e,n,t){var a=t("861d"),c=t("d2bb");e.exports=function(e,n,t){var r,o;return c&&"function"==typeof(r=n.constructor)&&r!==t&&a(o=r.prototype)&&o!==t.prototype&&c(e,o),e}},a9e3:function(e,n,t){"use strict";var a=t("83ab"),c=t("da84"),r=t("94ca"),o=t("6eeb"),i=t("5135"),u=t("c6b6"),s=t("7156"),l=t("d9b5"),d=t("c04e"),f=t("d039"),p=t("7c73"),I=t("241c").f,w=t("06cf").f,b=t("9bf2").f,_=t("58a8").trim,m="Number",g=c[m],h=g.prototype,S=u(p(h))==m,M=function(e){if(l(e))throw TypeError("Cannot convert a Symbol value to a number");var n,t,a,c,r,o,i,u,s=d(e,"number");if("string"==typeof s&&s.length>2)if(s=_(s),n=s.charCodeAt(0),43===n||45===n){if(t=s.charCodeAt(2),88===t||120===t)return NaN}else if(48===n){switch(s.charCodeAt(1)){case 66:case 98:a=2,c=49;break;case 79:case 111:a=8,c=55;break;default:return+s}for(r=s.slice(2),o=r.length,i=0;i<o;i++)if(u=r.charCodeAt(i),u<48||u>c)return NaN;return parseInt(r,a)}return+s};if(r(m,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var O,B=function(e){var n=arguments.length<1?0:e,t=this;return t instanceof B&&(S?f((function(){h.valueOf.call(t)})):u(t)!=m)?s(new g(M(n)),t,B):M(n)},v=a?I(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),j=0;v.length>j;j++)i(g,O=v[j])&&!i(B,O)&&b(B,O,w(g,O));B.prototype=h,h.constructor=B,o(c,m,B)}},b734:function(e,n,t){"use strict";t("2426")},c14a:function(e,n,t){"use strict";t.r(n),t.d(n,"createBusInfo",(function(){return c})),t.d(n,"deleteBusInfo",(function(){return r})),t.d(n,"deleteBusInfoByIds",(function(){return o})),t.d(n,"updateBusInfo",(function(){return i})),t.d(n,"findBusInfo",(function(){return u})),t.d(n,"getBusInfoList",(function(){return s}));var a=t("b775"),c=function(e){return Object(a["default"])({url:"/busInfo/createBusInfo",method:"post",data:e})},r=function(e){return Object(a["default"])({url:"/busInfo/deleteBusInfo",method:"delete",data:e})},o=function(e){return Object(a["default"])({url:"/busInfo/deleteBusInfoByIds",method:"delete",data:e})},i=function(e){return Object(a["default"])({url:"/busInfo/updateBusInfo",method:"put",data:e})},u=function(e){return Object(a["default"])({url:"/busInfo/findBusInfo",method:"get",params:e})},s=function(e){return Object(a["default"])({url:"/busInfo/getBusInfoList",method:"get",params:e})}},d95b:function(e,n,t){"use strict";t.r(n),t.d(n,"getLocation",(function(){return c})),t.d(n,"track",(function(){return r}));var a=t("b775"),c=function(e){return Object(a["default"])({url:"/gps/location",method:"get",params:e})},r=function(e){return Object(a["default"])({url:"/gps/track",method:"get",params:e})}}}]);